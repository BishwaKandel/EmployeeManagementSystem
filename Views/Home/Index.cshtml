@model IEnumerable<Employee>

@{
    ViewBag.Title = "Employee List";
}

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

<div class="container mt-4">
    <h2 class="mb-4 text-center">Employee List</h2>

    <!-- Search Box -->
    <div class="mb-3">
        <input type="text" id="searchBox" class="form-control" placeholder="Search by name...">
    </div>

    <!-- Table -->
    <table class="table table-bordered table-hover" id="employeeTable">
        <thead class="table-dark">
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Department</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var employee in Model)
            {
                <tr>
                    <td>@employee.Name</td>
                    <td>@employee.Email</td>
                    <td>@employee.Department</td>

                    <td>
                        <a asp-controller = "home" asp-action = "details" asp-route-id = "@employee.Id"
                           class="btn btn-sm btn-warning me-1">View</a>
                        @* <a href="@Url.Action("details", "Home", new { id = employee.Id })" class="btn btn-sm btn-warning me-1">View</a> *@
                        @* @Html.ActionLink("View" , "details" , "home" , new {id = @employee.Id}) *@
                        @* <a href="/home/details/@employee.Id" class="btn btn-sm btn-info me-1">View</a> *@
                        <a href="@Url.Action("Edit", "Home", new { id = employee.Id })" class="btn btn-sm btn-warning me-1">Edit</a>
                        <form asp-action="Delete" asp-controller="Home" asp-route-id="@employee.Id" method="post" class="d-inline" onsubmit="return confirm('Are you sure you want to delete this employee?');">
                            <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                        </form>
                    </td>
                </tr> 
            }
        </tbody>
    </table>
</div>

<!-- jQuery + Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
    $(document).ready(function () {
        // Highlight row on hover
        $('#employeeTable tbody tr').hover(
            function () { $(this).addClass('table-active'); },
            function () { $(this).removeClass('table-active'); }
        );

        // Search filter by name
        $('#searchBox').on('keyup', function () {
            let value = $(this).val().toLowerCase();
            $('#employeeTable tbody tr').filter(function () {
                $(this).toggle($(this).find('td:first').text().toLowerCase().indexOf(value) > -1)
            });
        });
    });
</script>
